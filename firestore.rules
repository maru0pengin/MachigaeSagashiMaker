rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read,update,create: if true
    }
    match /users/{uid}{
      allow delete: if request.auth !=null
        && request.auth.uid == uid;
    }
    //ユーザー情報ドキュメントのパスを構築する関数
    function user(uid){
    	return /databases/$(database)/documents/users/$(uid)
    }
    match /quizzes/{quiz}{
      allow delete: if request.auth !=null
       && resource.data.authorRef == user(request.auth.uid)
    }
  }
}